<!-- fragments/sidebar.html -->
<aside th:fragment="sidebar(sidebarData)" xmlns:th="http://www.w3.org/1999/xhtml"
       class="navbar navbar-vertical navbar-expand-sm" data-bs-theme="dark" style="word-wrap:break-word">

    <div class="container-fluid">
        <h2 class="navbar-brand navbar-brand-autodark">
            <a th:href="@{/home}"
               th:text="${sidebarData.namaToko}"
               style="margin-left:10px !important; word-break: break-word; white-space: normal; display: block; max-width: 150px;text-align:center">
                AAANU
            </a>
        </h2>

        <div class="collapse navbar-collapse" id="sidebar-menu">
            <ul class="navbar-nav pt-lg-3">

                <!-- Dashboard -->
                <li class="nav-item"
                    th:if="${sidebarData.role.name() == 'SUPER_ADMIN'}"
                    th:classappend="${activePage} == 'home' ? ' active'">
                    <a th:href="@{/home}" class="nav-link">
                        <span class="nav-link-title">Dashboard</span>
                    </a>
                </li>

                <!-- Kasir -->
                <li class="nav-item" th:classappend="${activePage} == 'kasir' ? ' active'">
                    <a th:href="@{/kasir}" class="nav-link">
                        <span class="nav-link-title">Buka Kasir</span>
                    </a>
                </li>

                <!-- Master Barang -->
                <li class="nav-item dropdown"
                    th:if="${sidebarData.role.name() == 'SUPER_ADMIN'}"
                    th:classappend="(${activePage} == 'masterBarang' or ${activePage} == 'kartuStok') ? ' active' : ''">
                    <a class="nav-link dropdown-toggle"
                       href="#sidebar-barang"
                       data-bs-toggle="collapse"
                       role="button"
                       aria-expanded="false"
                       aria-controls="sidebar-barang"
                       th:classappend="(${activePage} == 'masterBarang' or ${activePage} == 'kartuStok') ? '' : ' collapsed'">
                        <span class="nav-link-title">Master Barang</span>
                    </a>

                    <div class="collapse"
                         id="sidebar-barang"
                         th:classappend="(${activePage} == 'masterBarang' or ${activePage} == 'kartuStok') ? ' show' : ''">
                        <ul class="nav flex-column ms-3">
                            <li class="nav-item">
                                <a class="nav-link"
                                   href="/products"
                                   th:classappend="${activePage} == 'masterBarang' ? ' active' : ''">
                                    Master Barang
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"
                                   href="/products/kartu_stok"
                                   th:classappend="${activePage} == 'kartuStok' ? ' active' : ''">
                                    Kartu Stok
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>

                <!-- Supplier -->
                <li class="nav-item"
                    th:if="${sidebarData.role.name() == 'SUPER_ADMIN'}"
                    th:classappend="${activePage} == 'supplier' ? ' active'">
                    <a class="nav-link" th:href="@{/supplier}">
                        <span class="nav-link-title">Supplier</span>
                    </a>
                </li>

                <!-- Preorder -->
                <li class="nav-item dropdown"
                    th:if="${sidebarData.role.name() == 'SUPER_ADMIN'}"
                    th:classappend="(${activePage} == 'preorderTambah' or ${activePage} == 'preorderRiwayat' or ${activePage} == 'preorderUnderstock') ? ' active' : ''">
                    <a class="nav-link dropdown-toggle"
                       href="#sidebar-preorder"
                       data-bs-toggle="collapse"
                       role="button"
                       aria-expanded="false"
                       aria-controls="sidebar-preorder"
                       th:classappend="(${activePage} == 'preorderTambah' or ${activePage} == 'preorderRiwayat' or ${activePage} == 'preorderUnderstock') ? '' : ' collapsed'">
                        <span class="nav-link-title">Preorder</span>
                    </a>

                    <div class="collapse"
                         id="sidebar-preorder"
                         th:classappend="(${activePage} == 'preorderTambah' or ${activePage} == 'preorderRiwayat' or ${activePage} == 'preorderUnderstock') ? ' show' : ''">
                        <ul class="nav flex-column ms-3">
                            <li class="nav-item">
                                <a class="nav-link"
                                   href="/preorder/tambah"
                                   th:classappend="${activePage} == 'preorderTambah' ? ' active' : ''">
                                    Tambah Preorder
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"
                                   href="/preorder/understock"
                                   th:classappend="${activePage} == 'preorderUnderstock' ? ' active' : ''">
                                    Barang Under Stock
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"
                                   href="/preorder"
                                   th:classappend="${activePage} == 'preorderRiwayat' ? ' active' : ''">
                                    Riwayat Preorder
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>

                <!-- Penjualan -->
                <li class="nav-item" th:classappend="${activePage} == 'penjualan' ? ' active'">
                    <a class="nav-link" th:href="@{/penjualan}">
                        <span class="nav-link-title">Penjualan</span>
                    </a>
                </li>

                <!-- Pembelian -->
                <li class="nav-item dropdown"
                    th:if="${sidebarData.role.name() == 'SUPER_ADMIN'}"
                    th:classappend="(${activePage} == 'pembelianTambah' or ${activePage} == 'pembelianRiwayat') ? ' active' : ''">
                    <a class="nav-link dropdown-toggle"
                       href="#sidebar-pembelian"
                       data-bs-toggle="collapse"
                       role="button"
                       aria-expanded="false"
                       aria-controls="sidebar-pembelian"
                       th:classappend="(${activePage} == 'pembelianTambah' or ${activePage} == 'pembelianRiwayat') ? '' : ' collapsed'">
                        <span class="nav-link-title">Pembelian</span>
                    </a>

                    <div class="collapse"
                         th:if="${sidebarData.role.name() == 'SUPER_ADMIN'}"
                         id="sidebar-pembelian"
                         th:classappend="(${activePage} == 'pembelianTambah' or ${activePage} == 'pembelianRiwayat') ? ' show' : ''">
                        <ul class="nav flex-column ms-3">
                            <li class="nav-item">
                                <a class="nav-link"
                                   href="/pembelian/tambah"
                                   th:classappend="${activePage} == 'pembelianTambah' ? ' active' : ''">
                                    Tambah Pembelian
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"
                                   href="/pembelian"
                                   th:classappend="${activePage} == 'pembelianRiwayat' ? ' active' : ''">
                                    Riwayat Pembelian
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>

                <!-- Laporan -->
                <li class="nav-item dropdown"
                    th:if="${sidebarData.role.name() == 'SUPER_ADMIN'}"
                    th:classappend="(${activePage} == 'pendapatanPeriode' or ${activePage} == 'pendapatanPelanggan' or ${activePage} == 'pengeluaranPeriode' or ${activePage} == 'pengeluaranPelanggan' or ${activePage} == 'nilaiPersediaan') ? ' active' : ''">

                    <a class="nav-link dropdown-toggle"
                       href="#sidebar-laporan"
                       data-bs-toggle="collapse"
                       role="button"
                       aria-expanded="false"
                       aria-controls="sidebar-laporan"
                       th:classappend="(${activePage} == 'pendapatanPeriode' or ${activePage} == 'pendapatanPelanggan' or ${activePage} == 'pengeluaranPeriode' or ${activePage} == 'pengeluaranPelanggan' or ${activePage} == 'nilaiPersediaan') ? '' : ' collapsed'">
                        <span class="nav-link-title">Laporan</span>
                    </a>

                    <div class="collapse"
                         id="sidebar-laporan"
                         th:classappend="(${activePage} == 'pendapatanPeriode' or ${activePage} == 'pendapatanPelanggan' or ${activePage} == 'pengeluaranPeriode' or ${activePage} == 'pengeluaranPelanggan' or ${activePage} == 'nilaiPersediaan') ? ' show' : ''">

                        <ul class="nav flex-column ms-3">

                            <li class="nav-item">
                                <a class="nav-link"
                                   href="/laporan/nilai_persediaan"
                                   th:classappend="${activePage} == 'nilaiPersediaan' ? ' active' : ''">
                                    Laporan Nilai Persediaan Barang
                                </a>
                            </li>

                            <!-- Laporan Pendapatan -->
                            <li class="nav-item dropdown"
                                th:classappend="(${activePage} == 'pendapatanPeriode' or ${activePage} == 'pendapatanPelanggan') ? ' active' : ''">
                                <a class="nav-link dropdown-toggle"
                                   href="#laporanPendapatanSub"
                                   data-bs-toggle="collapse"
                                   role="button"
                                   aria-expanded="false"
                                   aria-controls="laporanPendapatanSub"
                                   th:classappend="(${activePage} == 'pendapatanPeriode' or ${activePage} == 'pendapatanPelanggan') ? '' : ' collapsed'">
                                    Laporan Penjualan
                                </a>

                                <div class="collapse"
                                     id="laporanPendapatanSub"
                                     th:classappend="(${activePage} == 'pendapatanPeriode' or ${activePage} == 'pendapatanPelanggan') ? ' show' : ''">

                                    <ul class="nav flex-column ms-3">
                                        <li class="nav-item">
                                            <a class="nav-link"
                                               href="/laporan/pendapatan/periode"
                                               th:classappend="${activeSubPage} == 'pendapatanPeriode' ? ' active' : ''">
                                                Per Periode
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link"
                                               href="/laporan/pendapatan/pelanggan"
                                               th:classappend="${activeSubPage} == 'pendapatanPelanggan' ? ' active' : ''">
                                                Per Pelanggan
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </li>

                            <!-- Laporan Pengeluaran -->
                            <li class="nav-item dropdown"
                                th:classappend="(${activePage} == 'pengeluaranPeriode' or ${activePage} == 'pengeluaranPelanggan') ? ' active' : ''">
                                <a class="nav-link dropdown-toggle"
                                   href="#laporanPengeluaranSub"
                                   data-bs-toggle="collapse"
                                   role="button"
                                   aria-expanded="false"
                                   aria-controls="laporanPengeluaranSub"
                                   th:classappend="(${activePage} == 'pengeluaranPeriode' or ${activePage} == 'pengeluaranPelanggan') ? '' : ' collapsed'">
                                    Laporan Pembelian
                                </a>

                                <div class="collapse"
                                     id="laporanPengeluaranSub"
                                     th:classappend="(${activePage} == 'pengeluaranPeriode' or ${activePage} == 'pengeluaranPelanggan') ? ' show' : ''">

                                    <ul class="nav flex-column ms-3">
                                        <li class="nav-item">
                                            <a class="nav-link"
                                               href="/laporan/pengeluaran/periode"
                                               th:classappend="${activeSubPage} == 'pengeluaranPeriode' ? ' active' : ''">
                                                Per Periode
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link"
                                               href="/laporan/pengeluaran/pelanggan"
                                               th:classappend="${activeSubPage} == 'pengeluaranPelanggan' ? ' active' : ''">
                                                Per Supplier
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                        </ul>
                    </div>
                </li>

                <!-- Customer -->
                <li class="nav-item"
                    th:if="${sidebarData.role.name() == 'SUPER_ADMIN'}"
                    th:classappend="${activePage} == 'customer' ? ' active'">
                    <a th:href="@{/customer}" class="nav-link">
                        <span class="nav-link-title">Pelanggan</span>
                    </a>
                </li>

                <!-- User -->
                <li class="nav-item"
                    th:if="${sidebarData.role.name() == 'SUPER_ADMIN'}"
                    th:classappend="${activePage} == 'user' ? ' active'">
                    <a th:href="@{/user}" class="nav-link">
                        <span class="nav-link-title">User</span>
                    </a>
                </li>

                <!-- Settings -->
                <li class="nav-item"
                    th:if="${sidebarData.role.name() == 'SUPER_ADMIN'}"
                    th:classappend="${activePage} == 'setting' ? ' active'">
                    <a class="nav-link" th:href="@{/setting}">
                        <span class="nav-link-title">Settings</span>
                    </a>
                </li>

            </ul>
        </div>

        <!-- Logout Button -->
        <div class="logout-button mt-3">
            <a th:href="@{/logout}" class="btn btn-outline-danger w-100"
               onclick="return confirm('Are you sure you want to logout?');">
                Logout
            </a>
        </div>
    </div>
</aside>
